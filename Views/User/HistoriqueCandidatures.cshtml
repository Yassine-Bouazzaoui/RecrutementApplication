@model IEnumerable<RecrutementApplication.Models.Candidature>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
@if (!string.IsNullOrEmpty(ViewBag.SuccessMessage))
{
    <div class="alert alert-success alert-dismissible fade show animate__animated animate__fadeIn" role="alert">
        <i class="fas fa-check-circle me-2"></i>
        @ViewBag.SuccessMessage
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger alert-dismissible fade show animate__animated animate__fadeIn" role="alert">
        <i class="fas fa-exclamation-circle me-2"></i>
        @TempData["Error"]
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
}
<div class="container py-5 animate__animated animate__fadeIn">
    <div class="card shadow-lg">
        <div class="card-header bg-primary text-white p-4">
            <h1 class="mb-0">
                <i class="fas fa-history me-2"></i>
                Historique des Candidatures
            </h1>
        </div>

        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-hover align-middle">
                    <thead class="table-light">
                        <tr>
                            <th scope="col"><i class="fas fa-building me-2"></i>Logo</th>
                            <th scope="col"><i class="fas fa-company me-2"></i>Entreprise</th>
                            <th scope="col"><i class="fas fa-briefcase me-2"></i>Poste</th>
                            <th scope="col"><i class="fas fa-calendar me-2"></i>Date de Postulation</th>
                            <th scope="col"><i class="fas fa-info-circle me-2"></i>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var candidature in Model)
                        {
                            <tr class="animate__animated animate__fadeIn" style="animation-delay: @(Model.ToList().IndexOf(candidature) * 0.1)s">
                                <td>
                                    <div class="rounded-circle overflow-hidden" style="width: 50px; height: 50px;">
                                        <img src="@Url.Content($"~/img/{@candidature.Offre.EntrepriseLogo}")"
                                             alt="Logo @candidature.Offre.Entreprise"
                                             class="img-fluid"
                                             style="width: 100%; height: 100%; object-fit: cover;" />
                                    </div>
                                </td>
                                <td>
                                    <span class="fw-bold">@candidature.Offre.Entreprise</span>
                                </td>
                                <td>
                                    <span class="badge bg-info text-dark">@candidature.Offre.Poste</span>
                                </td>
                                <td>
                                    <span class="text-muted">
                                        <i class="far fa-clock me-1"></i>
                                        @(candidature.DatePostulation?.ToString("dd/MM/yyyy") ?? "Non définie")
                                    </span>
                                </td>
                                <td>
                                    <a href="@Url.Action("Details", "Offres", new { id = @candidature.Offre.Id })"
                                       class="btn btn-primary btn-sm rounded-pill">
                                        <i class="fas fa-eye me-1"></i>
                                        Voir détails
                                    </a>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>

<style>
    .table td, .table th {
        vertical-align: middle;
    }

    .card {
        border-radius: 15px;
        border: none;
    }

    .card-header {
        border-radius: 15px 15px 0 0 !important;
    }

    .btn-primary {
        transition: all 0.3s ease;
    }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

    .badge {
        padding: 8px 12px;
        font-weight: 500;
    }

    tr {
        transition: all 0.2s ease;
    }

        tr:hover {
            background-color: rgba(0,0,0,0.02);
            transform: translateX(5px);
        }

    .img-fluid {
        transition: transform 0.3s ease;
    }

        .img-fluid:hover {
            transform: scale(1.1);
        }
</style>